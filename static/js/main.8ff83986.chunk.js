(this.webpackJsonpfontanelle=this.webpackJsonpfontanelle||[]).push([[0],{71:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(7),o=n.n(c),i=n(25),u=n(26),s=n(30),l=n(29),d=n(27),p=n.n(d),h=n(4),m=n.n(h),j=n(8),v=n.n(j),f=n(2),b=n(13),g=n.n(b),k=n(28),O=function(){var e=Object(k.a)(g.a.mark((function e(t){var n,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Math.round(5*t.lat)/5,a=Math.round(5*t.lng)/5,r='\n    [out:json];\n    (node["amenity"="drinking_water"](around:'.concat(t.around,",").concat(n,",").concat(a,"););\n    out;>;out;\n  "),e.abrupt("return",fetch("https://overpass-api.de/api/interpreter?data=".concat(r,"&output&cache-only=true")).then((function(e){return e.json()})).then((function(e){return e.elements})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=n(0),y=function(e){return Object(w.jsx)("svg",{id:"Layer_1",enableBackground:"new 0 0 512 512",height:"20px",viewBox:"0 0 512 512",width:"20px",fill:e.color||"blue",children:Object(w.jsxs)("g",{children:[Object(w.jsx)("path",{d:"m421.082 355.479c-16.269-24.198-32.288-43.872-32.962-44.698-2.849-3.49-7.115-5.514-11.62-5.514s-8.771 2.024-11.62 5.514c-.674.826-16.693 20.5-32.962 44.698-34.685 51.594-34.685 70.908-34.685 77.255 0 43.708 35.559 79.267 79.267 79.267s79.267-35.559 79.267-79.267c0-6.347 0-25.662-34.685-77.255z"}),Object(w.jsx)("path",{d:"m71.233 64.267h224.934c8.284 0 15-6.716 15-15v-34.267c0-8.284-6.716-15-15-15h-224.934c-8.284 0-15 6.716-15 15v34.267c0 8.284 6.716 15 15 15z"}),Object(w.jsx)("path",{d:"m56.233 159.6v64.267c0 8.284 6.716 15 15 15h19.267v-94.267h-19.267c-8.284 0-15 6.716-15 15z"}),Object(w.jsx)("path",{d:"m329.366 256c0 8.284 6.716 15 15 15h64.268c8.284 0 15-6.716 15-15v-32.133c0-43.708-35.56-79.267-79.268-79.267h-67.466v94.267h52.466z"}),Object(w.jsx)("path",{d:"m231.9 128.533h-1.067v-34.266h-94.267v34.267h-1.066c-8.284 0-15 6.716-15 15v96.4c0 8.284 6.716 15 15 15h96.4c8.284 0 15-6.716 15-15v-96.4c0-8.285-6.715-15.001-15-15.001z"})]})})},x=(n(70),n(71),function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).map=f.none,e.drinkingWaterNodes={},e.drinkingWaterMarkers=[],e.updateDrinkingWater=p()((function(){Object(f.map)((function(t){O({around:2e4,lat:t.getCenter().lat,lng:t.getCenter().lng}).then(e.addWaterMarkers)}))(e.map)}),1e3),e.addWaterMarkers=function(t){Object(f.map)((function(n){t.forEach((function(t){if(!e.drinkingWaterNodes[t.id]){var a=document.createElement("div");c.render(Object(w.jsx)(y,{}),a);var r=new m.a.Marker({element:a}).setLngLat([t.lon,t.lat]);r.addTo(n),e.drinkingWaterNodes[t.id]=t,e.drinkingWaterMarkers.push(r)}}))}))(e.map)},e}return Object(u.a)(n,[{key:"initializeMap",value:function(){var e=this;m.a.accessToken="pk.eyJ1IjoiZnJhbmNlc2NvY2lvcmlhIiwiYSI6ImNqcThyejR6ODA2ZDk0M25rZzZjcGo4ZmcifQ.yRWHQbG1dJjDp43d01bBOw";var t=new m.a.Map({container:"map",style:"mapbox://styles/francescocioria/cjqi3u6lmame92rmw6aw3uyhm?optimize=true",center:{lat:parseFloat(localStorage.getItem("start_lat")||"45.46"),lng:parseFloat(localStorage.getItem("start_lng")||"9.19")},zoom:15,scrollZoom:!1});t.addControl(new m.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0}})),t.on("load",(function(){e.map=Object(f.some)(t),e.updateDrinkingWater()})),t.on("move",this.updateDrinkingWater)}},{key:"componentDidMount",value:function(){this.initializeMap()}},{key:"componentDidUpdate",value:function(){var e=this;requestAnimationFrame((function(){Object(f.map)((function(e){return e.resize()}))(e.map)}))}},{key:"render",value:function(){return Object(w.jsx)(v.a,{grow:!0,id:"map"})}}]),n}(a.PureComponent));var M=function(){return Object(w.jsx)(v.a,{className:"App",style:{height:"100vh",width:"100vw"},children:Object(w.jsx)(x,{})})};n(76);o.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(M,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.8ff83986.chunk.js.map